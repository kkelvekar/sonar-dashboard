<!-- Sidebar -->
<div class="sidebar">
  <div class="filter-header">
    <h5>Filters</h5>
    <button class="btn btn-link clear-filters" (click)="clearFilters()">Clear all filters</button>
  </div>
  <!-- Quality Gate Filter -->
  <div class="filter-item">
    <h6>Quality Gate</h6>
    <button
      class="btn w-100 mb-1"
      [ngClass]="{
        'btn-success': isQualityGateSelected('passed'),
        'btn-outline-success': !isQualityGateSelected('passed')
      }"
      (click)="onQualityGateChange('passed')"
    >
      Passed
    </button>
    <button
      class="btn w-100 mb-1"
      [ngClass]="{
        'btn-danger': isQualityGateSelected('failed'),
        'btn-outline-danger': !isQualityGateSelected('failed')
      }"
      (click)="onQualityGateChange('failed')"
    >
      Failed
    </button>
  </div>
  <!-- Coverage Filter -->
  <div class="filter-item">
    <h6>Coverage</h6>
    <ul class="list-group">
      <li
        class="list-group-item"
        [class.active]="isCoverageSelected('>=80')"
        (click)="toggleCoverage('>=80')"
      >
        <span>â‰¥ 80%</span>
        <span class="badge">{{ coverageCounts['>=80'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isCoverageSelected('70-80')"
        (click)="toggleCoverage('70-80')"
      >
        <span>70% - 80%</span>
        <span class="badge">{{ coverageCounts['70-80'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isCoverageSelected('50-70')"
        (click)="toggleCoverage('50-70')"
      >
        <span>50% - 70%</span>
        <span class="badge">{{ coverageCounts['50-70'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isCoverageSelected('30-50')"
        (click)="toggleCoverage('30-50')"
      >
        <span>30% - 50%</span>
        <span class="badge">{{ coverageCounts['30-50'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isCoverageSelected('<30')"
        (click)="toggleCoverage('<30')"
      >
        <span>< 30%</span>
        <span class="badge">{{ coverageCounts['<30'] }}</span>
      </li>
    </ul>
  </div>
  <!-- Maintainability (Code Smell) Filter -->
  <div class="filter-item">
    <h6>Maintainability (Code Smell)</h6>
    <ul class="list-group">
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('maintainability', 'A')"
        (click)="toggleRating('maintainability', 'A')"
      >
        <span>A rating</span>
        <span class="badge">{{ ratingCounts.maintainability['A'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('maintainability', 'B')"
        (click)="toggleRating('maintainability', 'B')"
      >
        <span>B rating</span>
        <span class="badge">{{ ratingCounts.maintainability['B'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('maintainability', 'C')"
        (click)="toggleRating('maintainability', 'C')"
      >
        <span>C rating</span>
        <span class="badge">{{ ratingCounts.maintainability['C'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('maintainability', 'D')"
        (click)="toggleRating('maintainability', 'D')"
      >
        <span>D rating</span>
        <span class="badge">{{ ratingCounts.maintainability['D'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('maintainability', 'E')"
        (click)="toggleRating('maintainability', 'E')"
      >
        <span>E rating</span>
        <span class="badge">{{ ratingCounts.maintainability['E'] }}</span>
      </li>
    </ul>
  </div>
  <!-- Security (Vulnerabilities) Filter -->
  <div class="filter-item">
    <h6>Security (Vulnerabilities)</h6>
    <ul class="list-group">
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('security', 'A')"
        (click)="toggleRating('security', 'A')"
      >
        <span>A rating</span>
        <span class="badge">{{ ratingCounts.security['A'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('security', 'B')"
        (click)="toggleRating('security', 'B')"
      >
        <span>B rating</span>
        <span class="badge">{{ ratingCounts.security['B'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('security', 'C')"
        (click)="toggleRating('security', 'C')"
      >
        <span>C rating</span>
        <span class="badge">{{ ratingCounts.security['C'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('security', 'D')"
        (click)="toggleRating('security', 'D')"
      >
        <span>D rating</span>
        <span class="badge">{{ ratingCounts.security['D'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('security', 'E')"
        (click)="toggleRating('security', 'E')"
      >
        <span>E rating</span>
        <span class="badge">{{ ratingCounts.security['E'] }}</span>
      </li>
    </ul>
  </div>
  <!-- Reliability (Bugs) Filter -->
  <div class="filter-item">
    <h6>Reliability (Bugs)</h6>
    <ul class="list-group">
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('reliability', 'A')"
        (click)="toggleRating('reliability', 'A')"
      >
        <span>A rating</span>
        <span class="badge">{{ ratingCounts.reliability['A'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('reliability', 'B')"
        (click)="toggleRating('reliability', 'B')"
      >
        <span>B rating</span>
        <span class="badge">{{ ratingCounts.reliability['B'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('reliability', 'C')"
        (click)="toggleRating('reliability', 'C')"
      >
        <span>C rating</span>
        <span class="badge">{{ ratingCounts.reliability['C'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('reliability', 'D')"
        (click)="toggleRating('reliability', 'D')"
      >
        <span>D rating</span>
        <span class="badge">{{ ratingCounts.reliability['D'] }}</span>
      </li>
      <li
        class="list-group-item"
        [class.active]="isRatingSelected('reliability', 'E')"
        (click)="toggleRating('reliability', 'E')"
      >
        <span>E rating</span>
        <span class="badge">{{ ratingCounts.reliability['E'] }}</span>
      </li>
    </ul>
  </div>
</div>
